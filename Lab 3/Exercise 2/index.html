<!DOCTYPE html>
<html>
  <head>
    <title>Intelligent Shopping Cart</title>
    <style>
      body {
        font-family: Arial;
        padding: 20px;
      }
      button {
        margin: 5px;
      }
      input {
        width: 60px;
      }
    </style>
  </head>
  <body>
    <h2>ðŸ›’ Intelligent Shopping Cart</h2>

    <div id="products"></div>

    <br />
    <input type="text" id="coupon" placeholder="Enter Coupon" />
    <button onclick="applyCoupon()">Apply Coupon</button>

    <h3 id="total"></h3>

    <script>
      // 1. Product Array
      let cart = [
        { name: "Laptop", price: 50000, quantity: 1, category: "Electronics" },
        { name: "Book", price: 500, quantity: 2, category: "Education" },
      ];

      let couponDiscount = 0;

      // Display Cart
      function displayCart() {
        let output = "";
        let total = 0;
        let discount = 0;

        cart.forEach((item, index) => {
          let itemTotal = item.price * item.quantity;

          // 3. Bulk Discount
          if (item.quantity >= 3) {
            discount += itemTotal * 0.1;
          }

          // Category Discount
          if (item.category === "Electronics") {
            discount += itemTotal * 0.05;
          }

          total += itemTotal;

          output += `
      <p>
        ${item.name} - â‚¹${item.price} Ã—
        <input type="number" value="${item.quantity}" min="1"
          onchange="updateQuantity(${index}, this.value)">
        <button onclick="removeItem(${index})">Remove</button>
      </p>
    `;
        });

        // Time-based Discount
        let hour = new Date().getHours();
        if (hour >= 18 && hour <= 21) {
          discount += total * 0.05;
        }

        total = total - discount - couponDiscount;

        document.getElementById("products").innerHTML = output;
        document.getElementById(
          "total"
        ).innerText = `Total Price: â‚¹${total.toFixed(2)}`;
      }

      // 2. Update Quantity
      function updateQuantity(index, qty) {
        cart[index].quantity = Number(qty);
        displayCart();
      }

      // Remove Item
      function removeItem(index) {
        cart.splice(index, 1);
        displayCart();
      }

      // 4. Coupon Code Parsing
      function applyCoupon() {
        let code = document.getElementById("coupon").value.trim().toUpperCase();

        couponDiscount = 0;

        if (code === "SAVE10") {
          couponDiscount = 100;
        } else if (code === "WELCOME5") {
          couponDiscount = 50;
        } else {
          alert("Invalid Coupon Code");
        }

        displayCart();
      }

      // Initial Load
      displayCart();
    </script>
  </body>
</html>
